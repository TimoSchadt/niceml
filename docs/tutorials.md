# niceML Tutorial

Welcome to the tutorial for niceML, a Python package that helps you set
up your machine learning projects faster. niceML provides pipelines for
a variety of ML tasks, including

- Object Detection,
- Semantic Segmentation,
- Regression,
- Classification,
- and more.

In this tutorial, we will 
- walk you through the **installation** process,
- demonstrate how to **generate a test data set**,
- **train a semantic segmentation** with niceMLs default configuration
and 
- use introduce you to the awesome **niceML-dashboard**.

## Prerequisites

Before we get started, please ensure that you have the following
prerequisites:

- Python verision between 3.8.0 - 3.11.0 installed on your system
- Poetry package manager installed ([Install Poetry](
https://python-poetry.org/docs/#installation))
- Basic knowledge of Python programming

## Installation

To install niceML, follow these steps:

### Step 1: Create a New Project

First, create a new directory for your project and navigate into it 
using your terminal or command prompt:

```bash
mkdir niceml-tutorial
cd niceml-tutorial
```

### Step 2: Initialize a Poetry Project

Next, initialize a new Poetry project within your project directory:

```bash
poetry init --no-interaction
```

This will create a `pyproject.toml` file, which will serve as the
configuration file for your poetry project.

### Step 3: Add niceML as a Dependency

To add niceML as a dependency to your project, use the following
command:

```bash
poetry add niceML
```

This will automatically resolve and install the latest compatible
version of niceML and its required dependencies.

### Step 4: Verify Installation

You can verify that niceML is installed correctly by checking for the
version of your niceml installation.

```bash
niceml --version
```

If the version information is shown, congratulations! You have
successfully installed niceML.

## Getting Started

Now let's start your first training and view the results in the
dashboard. For this we will use test data that niceML generates for you.
But first, you need to initialize your niceML project, to get your
initial configurations.

### Step 1: Initialize niceML

To initialize niceML for your project, run the following command:

```bash
niceml init
```

This command will guide you through a series of questions to set up
niceML for your project. Provide the following answers based on your
system and preferences:

- `Do you want to use our pre-commit hooks?` Answer: Yes

  (If you prefer to use your own pre-commit hooks, answer No)
- `Should Poetry take care of creating a virtual environment?` Answer: 
  No

    (If you followed our installation guide, you are already using a
  poetry environment)
- `Do you use Apple Silicon as a GPU?` Answer: No

    (If you are using Apple Silicon as a GPU, answer Yes)
- `Is Windows your operating system?` Answer: No

  (If you are using Windows as your operating system, answer Yes)
- `Do you want to use our awesome dashboard?` Answer: Yes
  
    (This is where the experiment results can be shown)

Once you have answered all the questions, niceML will be initialized
according to your operating system and including the awesome dashboard.
If you find two new folders named `niceml-tutorial` (or whatever name
you chose for your project) and  `configs` within your project,
everything is prepared for your first experiment.

### Step 2: Optional: Adjust the .env File

Among the files generated by `niceml init`, you will find a `.env` file
with some general configuration parameters. Later, you can adjust the
parameters according to your needs.

If you like, you can define a new name of the data directory by setting
the `DATA_URI` parameter or specify the output file of the experiments
by setting the `EXPERIMENT_URI` parameter. Leave the other parameters as
they are for now.

### Step 3: Generate test data

niceML allows you to create a test dataset of sample images with numbers
randomly placed on them. Along with the images, it also generates label
information that indicates the locations of the numbers on each image.

```bash
niceml generate
```

After the command execution is complete, you will find the generated
images in the specified `DATA_URI` directory. Go have a look before we
continue.

### Step 4: Train your first model

You will now train your first model using the easy-to-use command-line
interface of niceml: `niceml train <path to your configuration yaml>`.
In this tutorial, we will train a Semantic Segmentation using the
default configuration.

```bash
niceml train configs/jobs/job_train/job_train_semseg/job_train_semseg_number.yaml
```

This command instructs niceML to start training a semantic segmentation
model based on the configuration file `job_train_semseg_number.yaml`.
The training may take a few minutes.

#### Monitoring

During the training process, niceML provides real-time updates on the
progress:

- First, niceML will give an overview about the layers of the model being
trained. This allows you to inspect the architecture and understand the
composition of the model.
- A progress bar indicates the number of images that have
already been processed by the training.
- The loss and other metrics are being calculated and displayed during the
training. This allows you to monitor the performance of the model.

#### A short insight into the training process

The training process consists of three steps: training, prediction, and
analysis. Each step serves a specific purpose in the training pipeline:

1. **Training**: During this step, the model learns from the training 
data to improve its performance. The model parameters are updated
iteratively based on the calculated loss and optimization algorithm.

2. **Prediction**: After training, the trained model is used to make
predictions on unseen data. This step allows you to evaluate the
model's performance on new images and assess its ability to identify
objects accurately.

3. **Analysis**: Once the prediction step is complete, niceML performs
an analysis of the trained model. This may include computing additional
metrics, or providing insights into the model's behavior and
performance, as well as checking if the training process was successful.

#### Checking the Experiment Output

After the training is completed, you can check the experiment output in
the new `EXPERIMENT_URI` folder. You will notice another new folder was
created with the prefix `SEMSEG`, followed by the current date and a
four-letter experiment ID in its name. This folder contains the trained
model, its configurations, net data, performance results and other
relevant information for the trained semantic segmentation model.

If the training was completed without any errors and the experiment
output folder was created, you successfully ran your first training with
niceML. Very good, you are almost done!

### Step 5: Exploring Results in the niceML Dashboard

niceML provides a nice and simple dashboard that allows you to visualize
and explore the results of your machine learning experiments.

To launch the niceML dashboard, simply execute the following command:

```bash
niceml dashboard
```

This command will start the dashboard using the default configuration
file `configs/dashboard/local.yaml`. When the local dashboard server is
up, the dashboard will open in a new tab in your default web browser.
Otherwise, you can click on the dashboard link in the terminal.

<div style="text-align: center;">
<img src="dashboard.png" alt="niceML-Dashboard" width="1000">
</div>

Try it out and navigate through the tabs. 

> **Note**: If you want to know more about the features of the
> dashboard, you can find more information [here](dashboard.md)

## Recap

Congratulations! You have learned how to 

- install niceML (`poetry add niceml`),
- initialize niceML for your project (`niceml init`),
- generate a test data set (`niceml generate`),
- train a model using default configuration (`niceml train <config
yaml>`),
- and use the dashboard to evaluate its performance (`niceml
dashboard`).
